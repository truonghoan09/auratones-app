/* ========= Auth Success / Error – Theme-aware ========= */
.auth-success,
.auth-error {
  --bg: var(--background-color);
  --card: var(--card-background);
  --ink: var(--text-color);
  --accent: rgb(var(--accent-color-rgb, 30, 136, 229));

  --ok: color-mix(in oklab, var(--accent) 90%, #2ecc71);
  --warn: var(--danger-color, #d32f2f);

  min-height: 100dvh;
  display: grid;
  place-items: center;
  padding: clamp(16px, 4vw, 40px);
  background:
    radial-gradient(1200px 600px at 50% -10%, color-mix(in oklab, var(--ok) 8%, transparent), transparent),
    var(--bg);
  isolation: isolate; /* keep effects on top */
}

.auth-error {
  background:
    radial-gradient(1200px 600px at 50% -10%, color-mix(in oklab, var(--warn) 12%, transparent), transparent),
    var(--bg);
}

.card {
  width: min(560px, 92vw);
  background: var(--card);
  color: var(--ink);
  border-radius: 16px;
  padding: 28px 28px 32px;
  box-shadow:
    0 10px 30px rgba(0,0,0,0.08),
    0 1px 0 rgba(255,255,255,0.08) inset;
  text-align: center;
}

.icon-wrap {
  width: 88px; height: 88px; margin: 0 auto 12px;
  border-radius: 50%;
  display: grid; place-items: center;
  background:
    radial-gradient(60px 60px at 50% 50%, color-mix(in oklab, var(--ok) 18%, transparent), transparent),
    color-mix(in oklab, var(--ok) 14%, transparent);
  box-shadow: 0 6px 18px color-mix(in oklab, var(--ok) 22%, transparent);
}

.checkmark { width: 52px; height: 52px; stroke: var(--ok); stroke-width: 3; stroke-linecap: round; stroke-linejoin: round; fill: none; }
.checkmark__circle { stroke: color-mix(in oklab, var(--ok) 40%, transparent); stroke-dasharray: 166; stroke-dashoffset: 166; animation: draw .8s ease-out forwards; }
.checkmark__check  { stroke: var(--ok); stroke-dasharray: 48;  stroke-dashoffset: 48;  animation: draw .5s .35s ease-out forwards; }
@keyframes draw { to { stroke-dashoffset: 0; } }

.title { font-size: clamp(20px, 2.2vw, 26px); font-weight: 800; letter-spacing: .2px; margin: 6px 0 6px; }
.subtitle { opacity: .85; margin: 0 auto 18px; font-size: 14.5px; }

.progress {
  height: 10px;
  border-radius: 999px;
  background: color-mix(in oklab, var(--ok) 15%, transparent);
  overflow: hidden;
  position: relative;
  margin: 6px 24px 18px;
  will-change: width;
}
.progress .bar {
  height: 100%;
  background:
    repeating-linear-gradient(
      45deg,
      color-mix(in oklab, var(--ok) 86%, #fff 14%),
      color-mix(in oklab, var(--ok) 86%, #fff 14%) 10px,
      color-mix(in oklab, var(--ok) 70%, #fff 10%) 10px,
      color-mix(in oklab, var(--ok) 70%, #fff 10%) 20px
    );
  border-radius: inherit;
  transition: width .18s ease;
  animation: stripes 1s linear infinite;
}
@keyframes stripes { from { background-position: 0 0; } to { background-position: 40px 0; } }

.primary-btn {
  margin-top: 6px;
  border: 0;
  border-radius: 999px;
  padding: 10px 16px;
  font-weight: 700;
  cursor: pointer;
  color: #fff;
  background: var(--ok);
  box-shadow: 0 6px 20px color-mix(in oklab, var(--ok) 30%, transparent);
  transition: transform .08s ease, filter .2s ease;
}
.primary-btn:hover { filter: brightness(1.06); }
.primary-btn:active { transform: translateY(1px) scale(.99); }

/* confetti */
.confetti { pointer-events: none; position: fixed; inset: 0; overflow: hidden; }
.confetti > span {
  --d: 0s;         /* delay set from React */
  --x: .5;         /* position set from React */
  position: absolute;
  width: 8px; height: 14px;
  left: calc(5% + 90% * var(--x));
  top: -20px;
  background: color-mix(in oklab, var(--ok) 70%, #fff 8%);
  border-radius: 2px; opacity: .9;
  animation: fall 1.8s var(--d) cubic-bezier(.2,.7,.2,1) forwards;
}
@keyframes fall { 100% { transform: translateY(110vh) rotate(230deg); opacity: .85; } }

/* === Error overrides (đừng gộp chung với progress) === */
.auth-error .icon-wrap {
  background:
    radial-gradient(60px 60px at 50% 50%, color-mix(in oklab, var(--warn) 18%, transparent), transparent),
    color-mix(in oklab, var(--warn) 14%, transparent);
  box-shadow: 0 6px 18px color-mix(in oklab, var(--warn) 22%, transparent);
}
.auth-error .checkmark       { stroke: var(--warn); }
.auth-error .checkmark__circle { stroke: color-mix(in oklab, var(--warn) 40%, transparent); }
.auth-error .checkmark__check  { stroke: var(--warn); }

.auth-error .primary-btn {
  background: var(--warn);
  box-shadow: 0 6px 20px color-mix(in oklab, var(--warn) 30%, transparent);
}
.auth-error .progress { background: color-mix(in oklab, var(--warn) 15%, transparent); }
.auth-error .progress .bar {
  background:
    repeating-linear-gradient(
      45deg,
      color-mix(in oklab, var(--warn) 86%, #fff 14%),
      color-mix(in oklab, var(--warn) 86%, #fff 14%) 10px,
      color-mix(in oklab, var(--warn) 70%, #fff 10%) 10px,
      color-mix(in oklab, var(--warn) 70%, #fff 10%) 20px
    );
}

/* Reduce motion support */
@media (prefers-reduced-motion: reduce) {
  .checkmark__circle, .checkmark__check, .progress .bar, .confetti > span { animation: none !important; }
  .progress .bar { transition: none; }
}
