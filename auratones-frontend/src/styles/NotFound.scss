/* src/styles/NotFound.scss */
@use "./mixins" as *;

.nf-wrap {
  position: relative;
  min-height: 100dvh;
  overflow: clip;
  display: grid;
  place-items: center;
  padding: 24px;
  background:
    radial-gradient(1200px 600px at 50% -10%, color-mix(in srgb, var(--accent-color, #3b7ad1) 12%, transparent), transparent),
    linear-gradient(180deg, color-mix(in srgb, #000 4%, transparent), transparent 30%),
    var(--card-background, #fff);
  color: var(--text-color, #222);
  isolation: isolate; /* tách layer để z-index hoạt động ổn định */
}

/* ===== Background layer (404 + effects) ===== */
.nf-stage {
  position: absolute;
  inset: clamp(50px, 10vh, 120px) 0 auto 0;
  height: clamp(160px, 34vh, 280px);
  display: grid; place-items: center;
  pointer-events: none;             /* không chắn click */
  z-index: 1;                       /* dưới content */
  opacity: .9;

  /* quầng sáng động */
  &::before {
    content: "";
    position: absolute; inset: -20% -10%;
    background: radial-gradient(60% 40% at 50% 30%, rgba(59,122,209,.25), transparent 60%);
    animation: nfDrift 8s ease-in-out infinite;
    filter: blur(18px);
  }
  /* light sweep */
  &::after {
    content: "";
    position: absolute; inset: -10%;
    background:
      linear-gradient(75deg, transparent 40%, rgba(255,255,255,.55) 50%, transparent 60%);
    mix-blend-mode: soft-light;
    animation: nfSweep 3.6s linear infinite;
  }
}

.nf-digit {
  font-weight: 900;
  font-size: clamp(108px, 22vw, 220px);
  line-height: 1;
  letter-spacing: .02em;
  color: color-mix(in srgb, var(--accent-color, #3b7ad1) 70%, #fff 30%);
  filter: drop-shadow(0 22px 40px rgba(0,0,0,.22));
  -webkit-text-stroke: 6px rgba(255,255,255,.55);
  text-shadow:
    0 2px 0 rgba(0,0,0,.04),
    0 18px 32px rgba(0,0,0,.18);
  transform-origin: center bottom;
  opacity: .85;
}
.d4   { animation: nfFloat 4.2s ease-in-out infinite; }
.d0   { animation: nfFloat 4.2s ease-in-out infinite .15s, nfPulse 2.8s ease-in-out infinite; }
.d4b  { animation: nfFloat 4.2s ease-in-out infinite .3s; }

/* chấm sáng + orbit */
.nf-spark { position: absolute; width: 10px; height: 10px; border-radius: 999px; background: color-mix(in srgb, var(--accent-color, #3b7ad1) 85%, #fff); box-shadow: 0 6px 18px rgba(59,122,209,.35); }
.s1 { top: -6%; left: 18%; animation: nfSpark 3.2s linear infinite; }
.s2 { top: -2%; right: 16%; animation: nfSpark 3.2s linear infinite .6s; }
.s3 { top: 18%; left: 50%; animation: nfSpark 3.2s linear infinite 1.2s; }

.nf-orbit {
  position: absolute; inset: 0;
  --r: clamp(60px, 8vw, 100px);
  border-radius: 50%;
  pointer-events: none;
}
.nf-orbit::after {
  content: "";
  position: absolute;
  width: 8px; height: 8px; border-radius: 50%;
  background: color-mix(in srgb, var(--accent-color, #3b7ad1) 80%, #fff);
  box-shadow: 0 10px 20px rgba(59,122,209,.35);
}
.o1::after { top: 50%; left: calc(50% + var(--r)); transform-origin: calc(-1 * var(--r)) 0; animation: nfOrbit 10s linear infinite; }
.o2::after { top: calc(50% - var(--r)); left: 50%; transform-origin: 0 var(--r); animation: nfOrbit 12s linear infinite reverse; }

/* ===== Foreground content ===== */
.nf-content {
  position: relative;
  z-index: 2;                         /* nằm trên stage */
  display: grid; place-items: center; gap: 12px;
  text-align: center;
  margin-top: clamp(120px, 24vh, 240px); /* đảm bảo không đè 404 */
}

.nf-title {
  margin: 0;
  font-size: clamp(20px, 2.6vw, 28px);
  font-weight: 900;
  letter-spacing: .2px;
  background: linear-gradient(180deg, var(--text-color, #111), color-mix(in srgb, var(--text-color, #111) 70%, #000));
  -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
}
.nf-sub { margin: 0; opacity: .8; font-size: clamp(14px, 1.8vw, 16px); }

.btn-home {
  margin-top: 8px;
  display: inline-grid; place-items: center;
  height: 42px; padding: 0 18px; border-radius: 999px;
  font-weight: 800; text-decoration: none;
  background: var(--accent-color, #3b7ad1); color: #fff;
  border: 1px solid var(--accent-color, #3b7ad1);
  box-shadow: 0 10px 24px rgba(0,0,0,.18);
  transition: transform .12s ease, box-shadow .14s ease, filter .14s ease;
}
.btn-home:hover { transform: translateY(-1px); filter: brightness(1.02); box-shadow: 0 14px 28px rgba(0,0,0,.22); }
.btn-home:active { transform: translateY(0); }

/* ===== Responsive ===== */
@include down($bp-tablet) {
  .nf-stage { inset: clamp(40px, 9vh, 100px) 0 auto 0; height: clamp(150px, 32vh, 250px); }
  .nf-content { margin-top: clamp(120px, 26vh, 240px); }
}
@include down($bp-mobile) {
  .nf-wrap { padding: 20px 16px; }
  .nf-stage { height: clamp(140px, 34vh, 220px); }
  .nf-spark { display: none; }  /* bớt nhiễu màn nhỏ */
}

/* ===== Reduced motion ===== */
@media (prefers-reduced-motion: reduce) {
  .d4, .d0, .d4b, .nf-spark, .nf-orbit::after, .nf-stage::after, .nf-stage::before { animation: none !important; }
}

/* ===== Animations ===== */
@keyframes nfFloat { 0%,100%{transform:translateY(0) rotate(-1.2deg)} 50%{transform:translateY(-10px) rotate(1.2deg)} }
@keyframes nfPulse { 0%,100%{filter:drop-shadow(0 10px 24px rgba(0,0,0,.18))} 50%{filter:drop-shadow(0 18px 38px rgba(0,0,0,.26))} }
@keyframes nfSpark { 0%{transform:translate(0,0) scale(1);opacity:.95} 50%{transform:translate(6px,-10px) scale(1.35);opacity:.6} 100%{transform:translate(0,0) scale(1);opacity:.95} }
@keyframes nfSweep { 0%{transform:translateX(-60%) rotate(0.001deg)} 100%{transform:translateX(60%) rotate(0.001deg)} }
@keyframes nfDrift { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-10px)} }
@keyframes nfOrbit { 0%{transform:rotate(0deg)} 100%{transform:rotate(360deg)} }
